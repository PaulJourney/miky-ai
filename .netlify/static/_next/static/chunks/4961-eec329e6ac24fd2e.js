(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4961],{285:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(5853),l=r(2115),s=r(4624),i=r(2085),n=r(9434);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=l.forwardRef((e,t)=>{let{className:r,variant:l,size:i,asChild:c=!1,...d}=e,u=c?s.DX:"button";return(0,a.Y)(u,{className:(0,n.cn)(o({variant:l,size:i,className:r})),ref:t,...d})});c.displayName="Button"},637:(e,t,r)=>{"use strict";r.d(t,{g:()=>s});var a=r(5853),l=r(9434);function s(e){let{className:t,size:r="md"}=e;return(0,a.FD)("div",{className:(0,l.cn)("font-bold font-inter",{sm:"text-lg",md:"text-2xl",lg:"text-4xl",xl:"text-6xl"}[r],t),children:[(0,a.Y)("span",{className:"bg-gradient-to-r from-blue-600 via-blue-500 to-blue-400 bg-clip-text text-transparent",children:"Miky"}),(0,a.Y)("span",{className:"text-white",children:".ai"})]})}},1760:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=1760,e.exports=t},2099:(e,t,r)=>{"use strict";r.d(t,{Bh:()=>d,Hh:()=>s,Jv:()=>i,ND:()=>a,Rk:()=>c,f3:()=>o,xw:()=>n});let a=(0,r(2354).UU)("https://adwjbkjmehkypaetkejw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFkd2pia2ptZWhreXBhZXRrZWp3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ3Mjg0ODcsImV4cCI6MjA3MDMwNDQ4N30.R4XUc6-VNQcXWdioXKJ87x4dQyeguOFFP87KDiixk2g");function l(e){let t=Date.now().toString(36),r=e.split("@")[0].slice(0,4).toUpperCase(),a=Math.random().toString(36).substring(2,6).toUpperCase();return"".concat(r).concat(a).concat(t.slice(-3)).substring(0,10)}async function s(e,t,r,s){try{let{data:i,error:n}=await a.auth.signUp({email:e.toLowerCase(),password:t,options:{data:{full_name:r,referred_by:s||null}}});if(n)return{error:{message:n.message}};if(i.user){let{error:t}=await a.from("profiles").upsert({id:i.user.id,email:e.toLowerCase(),full_name:r,referral_code:l(e),referred_by:s||null,credits:100,water_cleaned_liters:0,subscription_plan:"free",subscription_status:"active",referral_level:1,total_referral_earnings:0,pending_payout:0,language:"en",is_admin:!1,is_mock:!1},{onConflict:"id"});t&&console.error("Profile creation error:",t)}return{data:i,error:null}}catch(e){return{error:{message:e.message||"An unexpected error occurred"}}}}async function i(e,t){try{let{data:r,error:l}=await a.auth.signInWithPassword({email:e.toLowerCase(),password:t});if(l){if(l.message.includes("Invalid login credentials"))return{error:{message:"Incorrect email or password. Please check your credentials and try again."}};if(l.message.includes("Email not confirmed"))return{error:{message:"Please check your email and click the verification link before signing in."}};return{error:{message:l.message}}}return{data:r,error:null}}catch(e){return{error:{message:e.message||"An unexpected error occurred"}}}}async function n(e){try{let{error:t}=await a.auth.resetPasswordForEmail(e,{redirectTo:"".concat("Miky.ai","/auth/reset-password")});if(t)return{error:{message:t.message}};return{error:null}}catch(e){return{error:{message:e.message||"An unexpected error occurred"}}}}async function o(e){try{let{error:t}=await a.auth.updateUser({password:e});if(t)return{error:{message:t.message}};return{error:null}}catch(e){return{error:{message:e.message||"An unexpected error occurred"}}}}async function c(){try{let{data:{user:o}}=await a.auth.getUser();if(!o)return{data:null,error:null};let{data:c,error:d}=await a.from("profiles").select("*").eq("id",o.id).single();if(d){if("PGRST116"===d.code){var e,t,r,s,i,n;console.log("Profile not found, creating new profile for user:",o.id);let{error:c}=await a.from("profiles").insert({id:o.id,email:(null==(e=o.email)?void 0:e.toLowerCase())||"",full_name:(null==(t=o.user_metadata)?void 0:t.full_name)||(null==(r=o.email)?void 0:r.split("@")[0])||"User",referral_code:l(o.email||""),credits:100,water_cleaned_liters:0,subscription_plan:"free",subscription_status:"active",referral_level:1,total_referral_earnings:0,pending_payout:0,language:"en",is_admin:!1,is_mock:!1});if(c){if(console.error("Error creating profile:",c),"42501"===c.code)return console.log("RLS policy blocking profile creation, returning default profile"),{data:{id:o.id,email:(null==(s=o.email)?void 0:s.toLowerCase())||"",full_name:(null==(i=o.user_metadata)?void 0:i.full_name)||(null==(n=o.email)?void 0:n.split("@")[0])||"User",avatar_url:null,referral_code:l(o.email||""),referred_by:null,credits:100,water_cleaned_liters:0,subscription_plan:"free",subscription_status:"active",stripe_customer_id:null,referral_level:1,total_referral_earnings:0,pending_payout:0,language:"en",is_admin:!1,is_mock:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},error:null};return{data:null,error:{message:c.message}}}let{data:d,error:u}=await a.from("profiles").select("*").eq("id",o.id).single();if(u)return{data:null,error:{message:u.message}};return{data:d,error:null}}return{data:null,error:{message:d.message}}}return{data:c,error:null}}catch(e){return{data:null,error:{message:e.message||"An unexpected error occurred"}}}}function d(e){return a.auth.onAuthStateChange(e)}},2523:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var a=r(5853),l=r(2115),s=r(9434);let i=l.forwardRef((e,t)=>{let{className:r,type:l,...i}=e;return(0,a.Y)("input",{type:l,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},4105:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,O:()=>n});var a=r(5853),l=r(2115),s=r(2099);let i=(0,l.createContext)({user:null,profile:null,session:null,loading:!0,signOut:async()=>{},refreshProfile:async()=>{}});function n(e){let{children:t}=e,[r,n]=(0,l.useState)(null),[o,c]=(0,l.useState)(null),[d,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(!0),p=async()=>{if(!r)return void c(null);try{let{data:e,error:t}=await (0,s.Rk)();t?(console.error("Error fetching profile:",t),c(null)):c(e)}catch(e){console.error("Error refreshing profile:",e),c(null)}},g=async()=>{try{await s.ND.auth.signOut(),n(null),c(null),u(null)}catch(e){console.error("Error signing out:",e)}};return(0,l.useEffect)(()=>{s.ND.auth.getSession().then(e=>{var t;let{data:{session:r},error:a}=e;a&&console.error("Error getting session:",a),u(r),n(null!=(t=null==r?void 0:r.user)?t:null),h(!1)});let{data:{subscription:e}}=(0,s.Bh)(async(e,t)=>{var r,a;console.log("Auth state changed:",e,null==t||null==(r=t.user)?void 0:r.id),u(t),n(null!=(a=null==t?void 0:t.user)?a:null),h(!1),"SIGNED_IN"===e&&(null==t?void 0:t.user)&&await p(),"SIGNED_OUT"===e&&c(null)});return()=>e.unsubscribe()},[]),(0,l.useEffect)(()=>{!r||o||m||p()},[r,o,m]),(0,a.Y)(i.Provider,{value:{user:r,profile:o,session:d,loading:m,signOut:g,refreshProfile:p},children:t})}function o(){let e=(0,l.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},4404:(e,t,r)=>{"use strict";r.d(t,{f:()=>b});var a=r(5853),l=r(2115),s=r(8274),i=r(2550),n=r(285),o=r(2523),c=r(2099),d=r(4416),u=r(646),m=r(5339),h=r(1154),p=r(8749),g=r(2657);function b(e){let{showSignInModal:t,showSignUpModal:r,onClose:b,onSignInSuccess:f,onSignUpSuccess:x,onSwitchToSignUp:v,onSwitchToSignIn:w}=e,y=(0,i.c3)("auth"),[N,Y]=(0,l.useState)({email:"",password:""}),[F,D]=(0,l.useState)({fullName:"",email:"",password:"",referralCode:""}),[k,_]=(0,l.useState)({email:""}),[C,S]=(0,l.useState)(!1),[A,I]=(0,l.useState)(""),[U,P]=(0,l.useState)(""),[E,j]=(0,l.useState)(!1),[L,z]=(0,l.useState)(!1),[O,$]=(0,l.useState)(!1),R=()=>{b(),z(!1),$(!1),I(""),P(""),Y({email:"",password:""}),D({fullName:"",email:"",password:"",referralCode:""}),_({email:""})},K=async e=>{e.preventDefault(),S(!0),I("");let{error:t}=await (0,c.Jv)(N.email,N.password);t?(I(t.message),S(!1)):(R(),S(!1),P("Welcome back! You have been signed in successfully."),null==f||f())},J=async e=>{if(e.preventDefault(),S(!0),I(""),F.password.length<6){I("Password must be at least 6 characters long"),S(!1);return}let{error:t}=await (0,c.Hh)(F.email,F.password,F.fullName,F.referralCode);t?(I(t.message),S(!1)):(R(),S(!1),P("Account created! Please check your email to verify your account."),null==x||x())},M=async e=>{e.preventDefault(),S(!0),I("");let{error:t}=await (0,c.xw)(k.email);t?I(t.message):$(!0),S(!1)};return t||r?(0,a.FD)(a.FK,{children:[t&&(0,a.Y)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.FD)(s.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-gray-900/95 backdrop-blur-xl rounded-3xl border border-white/10 w-full max-w-md p-8 relative",children:[(0,a.Y)("button",{onClick:R,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:(0,a.Y)(d.A,{className:"w-5 h-5"})}),L?O?(0,a.FD)("div",{className:"text-center",children:[(0,a.Y)("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-600/20 to-cyan-600/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.Y)(u.A,{className:"w-10 h-10 text-blue-400"})}),(0,a.Y)("h3",{className:"text-2xl font-bold text-white mb-4",children:y("resetPassword.success")}),(0,a.FD)("p",{className:"text-gray-400 mb-6",children:["We've sent password reset instructions to ",(0,a.Y)("strong",{children:k.email})]}),(0,a.Y)(n.$,{onClick:R,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",children:"Close"})]}):(0,a.FD)(a.FK,{children:[(0,a.FD)("div",{className:"text-center mb-8",children:[(0,a.Y)("h3",{className:"text-2xl font-bold text-white mb-2",children:y("resetPassword.title")}),(0,a.Y)("p",{className:"text-gray-400",children:y("resetPassword.subtitle")})]}),A&&(0,a.FD)("div",{className:"mb-4 p-3 bg-red-600/20 border border-red-600/30 rounded-lg flex items-center gap-2",children:[(0,a.Y)(m.A,{className:"w-4 h-4 text-red-400"}),(0,a.Y)("span",{className:"text-red-400 text-sm",children:A})]}),(0,a.FD)("form",{onSubmit:M,className:"space-y-4",children:[(0,a.Y)("div",{children:(0,a.Y)(o.p,{type:"email",placeholder:y("resetPassword.email"),value:k.email,onChange:e=>_({email:e.target.value}),className:"bg-white/5 border-white/10 text-white placeholder-gray-400 focus:border-blue-500",required:!0})}),(0,a.Y)(n.$,{type:"submit",disabled:C,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",children:C?(0,a.FD)(a.FK,{children:[(0,a.Y)(h.A,{className:"w-4 h-4 mr-2 animate-spin"}),y("resetPassword.loading")]}):y("resetPassword.sendReset")})]}),(0,a.Y)("div",{className:"text-center mt-6",children:(0,a.FD)("button",{onClick:()=>z(!1),className:"text-blue-400 hover:text-blue-300 text-sm",children:["â† ",y("resetPassword.backToSignIn")]})})]}):(0,a.FD)(a.FK,{children:[(0,a.FD)("div",{className:"text-center mb-8",children:[(0,a.Y)("h3",{className:"text-2xl font-bold text-white mb-2",children:y("signIn.title")}),(0,a.Y)("p",{className:"text-gray-400",children:y("signIn.subtitle")})]}),A&&(0,a.FD)("div",{className:"mb-4 p-3 bg-red-600/20 border border-red-600/30 rounded-lg flex items-center gap-2",children:[(0,a.Y)(m.A,{className:"w-4 h-4 text-red-400"}),(0,a.Y)("span",{className:"text-red-400 text-sm",children:A})]}),(0,a.FD)("form",{onSubmit:K,className:"space-y-4",children:[(0,a.Y)("div",{children:(0,a.Y)(o.p,{type:"email",placeholder:y("signIn.email"),value:N.email,onChange:e=>Y({...N,email:e.target.value}),className:"bg-white/5 border-white/10 text-white placeholder-gray-400 focus:border-blue-500",required:!0})}),(0,a.FD)("div",{className:"relative",children:[(0,a.Y)(o.p,{type:E?"text":"password",placeholder:y("signIn.password"),value:N.password,onChange:e=>Y({...N,password:e.target.value}),className:"bg-white/5 border-white/10 text-white placeholder-gray-400 focus:border-blue-500 pr-10",required:!0}),(0,a.Y)("button",{type:"button",onClick:()=>j(!E),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300",children:E?(0,a.Y)(p.A,{className:"w-4 h-4"}):(0,a.Y)(g.A,{className:"w-4 h-4"})})]}),(0,a.Y)("div",{className:"text-right",children:(0,a.Y)("button",{type:"button",onClick:()=>z(!0),className:"text-blue-400 hover:text-blue-300 text-sm",children:y("signIn.forgotPassword")})}),(0,a.Y)(n.$,{type:"submit",disabled:C,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",children:C?(0,a.FD)(a.FK,{children:[(0,a.Y)(h.A,{className:"w-4 h-4 mr-2 animate-spin"}),y("signIn.loading")]}):y("signIn.signInButton")})]}),(0,a.Y)("div",{className:"text-center mt-6",children:(0,a.FD)("p",{className:"text-gray-400 text-sm",children:[y("signIn.noAccount")," ",(0,a.Y)("button",{onClick:()=>{null==v||v()},className:"text-blue-400 hover:text-blue-300",children:y("signIn.signUp")})]})})]})]})}),r&&(0,a.Y)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.FD)(s.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-gray-900/95 backdrop-blur-xl rounded-3xl border border-white/10 w-full max-w-md p-8 relative",children:[(0,a.Y)("button",{onClick:R,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:(0,a.Y)(d.A,{className:"w-5 h-5"})}),(0,a.FD)("div",{className:"text-center mb-8",children:[(0,a.Y)("h3",{className:"text-2xl font-bold text-white mb-2",children:y("signUp.title")}),(0,a.Y)("p",{className:"text-gray-400",children:y("signUp.subtitle")})]}),A&&(0,a.FD)("div",{className:"mb-4 p-3 bg-red-600/20 border border-red-600/30 rounded-lg flex items-center gap-2",children:[(0,a.Y)(m.A,{className:"w-4 h-4 text-red-400"}),(0,a.Y)("span",{className:"text-red-400 text-sm",children:A})]}),(0,a.FD)("form",{onSubmit:J,className:"space-y-4",children:[(0,a.Y)("div",{children:(0,a.Y)(o.p,{type:"text",placeholder:y("signUp.firstName"),value:F.fullName,onChange:e=>D({...F,fullName:e.target.value}),className:"bg-white/5 border-white/10 text-white placeholder-gray-400 focus:border-blue-500",required:!0})}),(0,a.Y)("div",{children:(0,a.Y)(o.p,{type:"email",placeholder:y("signUp.email"),value:F.email,onChange:e=>D({...F,email:e.target.value}),className:"bg-white/5 border-white/10 text-white placeholder-gray-400 focus:border-blue-500",required:!0})}),(0,a.FD)("div",{className:"relative",children:[(0,a.Y)(o.p,{type:E?"text":"password",placeholder:y("signUp.password"),value:F.password,onChange:e=>D({...F,password:e.target.value}),className:"bg-white/5 border-white/10 text-white placeholder-gray-400 focus:border-blue-500 pr-10",minLength:6,required:!0}),(0,a.Y)("button",{type:"button",onClick:()=>j(!E),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-300",children:E?(0,a.Y)(p.A,{className:"w-4 h-4"}):(0,a.Y)(g.A,{className:"w-4 h-4"})})]}),(0,a.Y)("div",{children:(0,a.Y)(o.p,{type:"text",placeholder:y("signUp.referralCode"),value:F.referralCode,onChange:e=>D({...F,referralCode:e.target.value}),className:"bg-white/5 border-white/10 text-white placeholder-gray-400 focus:border-blue-500"})}),(0,a.Y)(n.$,{type:"submit",disabled:C,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",children:C?(0,a.FD)(a.FK,{children:[(0,a.Y)(h.A,{className:"w-4 h-4 mr-2 animate-spin"}),y("signUp.loading")]}):y("signUp.signUpButton")})]}),(0,a.Y)("div",{className:"text-center mt-6",children:(0,a.FD)("p",{className:"text-gray-400 text-sm",children:[y("signUp.alreadyHaveAccount")," ",(0,a.Y)("button",{onClick:()=>{null==w||w()},className:"text-blue-400 hover:text-blue-300",children:y("signUp.signIn")})]})})]})}),U&&(0,a.Y)("div",{className:"fixed top-4 right-4 z-50",children:(0,a.FD)(s.P.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},className:"bg-green-600/20 border border-green-600/30 rounded-lg p-4 flex items-center gap-3 backdrop-blur-xl max-w-sm",children:[(0,a.Y)(u.A,{className:"w-5 h-5 text-green-400"}),(0,a.Y)("span",{className:"text-green-400 text-sm",children:U}),(0,a.Y)("button",{onClick:()=>P(""),className:"text-green-400 hover:text-green-300 ml-2",children:(0,a.Y)(d.A,{className:"w-4 h-4"})})]})})]}):null}},4615:(e,t,r)=>{"use strict";r.d(t,{Y:()=>k});var a=r(5853),l=r(2115),s=r(8274),i=r(5695),n=r(2550),o=r(637),c=r(285),d=r(2523),u=r(4105),m=r(2099),h=r(6474),p=r(646),g=r(8691),b=r(1539),f=r(4416),x=r(4783),v=r(1154),w=r(4229),y=r(4940),N=r(7951),Y=r(5868),F=r(7580);let D=[{code:"en",label:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"it",label:"Italiano",flag:"\uD83C\uDDEE\uD83C\uDDF9"},{code:"es",label:"Espa\xf1ol",flag:"\uD83C\uDDEA\uD83C\uDDF8"}];function k(e){var t,r,k,_,C,S,A,I;let{transparent:U=!1,currentPage:P="home",waterAnimation:E=!1,onSignInClick:j,onSignUpClick:L,overrideCredits:z,overrideWaterLiters:O}=e,{user:$,profile:R,loading:K,signOut:J}=(0,u.A)(),M=(0,i.useRouter)(),T=(0,i.usePathname)(),W=(0,n.c3)("header"),[X,q]=(0,l.useState)(!1),[B,Q]=(0,l.useState)(!1),[Z,G]=(0,l.useState)(!1),[H,V]=(0,l.useState)(D[0]);(0,l.useEffect)(()=>{let e=T.split("/")[1],t=D.find(t=>t.code===e);if(t)V(t),localStorage.setItem("preferred-locale",t.code);else{let e=localStorage.getItem("preferred-locale"),t=D.find(t=>t.code===e);t&&V(t)}},[T]);let ee=e=>{localStorage.setItem("preferred-locale",e.code);let t=T.split("/")[1],r=T.replace("/".concat(t),"")||"",a="";a=D.some(e=>e.code===t)?"en"===e.code?"/en".concat(r):"/".concat(e.code).concat(r):"en"===e.code?"/en":"/".concat(e.code),M.push(a),V(e),q(!1)},[et,er]=(0,l.useState)(!1),[ea,el]=(0,l.useState)(!1),[es,ei]=(0,l.useState)(""),[en,eo]=(0,l.useState)(""),[ec,ed]=(0,l.useState)(!1),eu=e=>{"signin"===e&&j?j():"signup"===e&&L?L():window.dispatchEvent(new CustomEvent("auth-modal",{detail:{action:e}}))},em=e=>e.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2),eh=async e=>{ed(!0);try{await new Promise(e=>setTimeout(e,1e3)),"name"===e?er(!1):el(!1)}catch(e){console.error("Error updating profile:",e)}finally{ed(!1)}};["it","es"].includes(T.split("/")[1]);let ep=H.code,eg="en"!==ep,eb=eg?ep:"",ef=[{label:"Home",href:eg?"/".concat(eb):"/",key:"home"},{label:"Chat",href:$?"/dashboard":eg?"/".concat(eb,"/chat"):"/chat",key:"chat"},{label:"Pricing",href:eg?"/".concat(eb,"/pricing"):"/pricing",key:"pricing"},{label:"Refer",href:eg?"/".concat(eb,"/refer"):"/refer",key:"refer"}];return(0,a.FD)(a.FK,{children:[(0,a.FD)("header",{className:"".concat(U?"absolute top-0 left-0 right-0 z-50 bg-transparent backdrop-blur-md border-b border-white/10":"border-b border-gray-800 bg-gray-950 sticky top-0 z-50"," px-6 py-4"),children:[(0,a.FD)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,a.Y)("button",{onClick:()=>M.push("/"),children:(0,a.Y)(o.g,{size:"md"})}),(0,a.FD)("div",{className:"hidden md:flex items-center gap-6",children:[(0,a.Y)("nav",{className:"flex items-center gap-6",children:ef.map(e=>{let t=P===e.key;return(0,a.Y)("button",{onClick:()=>M.push(e.href),className:"transition-colors text-sm font-medium ".concat(t?"bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent":"text-white/60 hover:text-white"),children:e.label},e.label)})}),(0,a.FD)("div",{className:"relative",children:[(0,a.FD)(c.$,{variant:"ghost",className:"text-white/60 hover:text-white/80 px-3 py-2 text-sm",onClick:()=>q(!X),children:[H.code.toUpperCase(),(0,a.Y)(h.A,{className:"w-3 h-3 ml-1"})]}),X&&(0,a.Y)("div",{className:"absolute top-full right-0 mt-2 bg-gray-900 border border-gray-700 rounded-lg shadow-lg py-2 min-w-[180px] z-50",children:D.map(e=>(0,a.FD)("button",{onClick:()=>ee(e),className:"w-full flex items-center gap-3 px-4 py-2 text-left text-sm transition-colors ".concat(H.code===e.code?"bg-blue-600/20 text-blue-400 border border-blue-600/30":"text-white hover:bg-gray-800"),children:[(0,a.Y)("span",{className:"text-lg",children:e.flag}),(0,a.Y)("span",{className:"font-medium",children:e.label}),(0,a.Y)("span",{className:"text-xs text-white/60",children:e.code.toUpperCase()}),H.code===e.code&&(0,a.Y)(p.A,{className:"w-4 h-4 ml-auto text-blue-400"})]},e.code))})]}),$?(0,a.FD)("div",{className:"flex items-center gap-4",children:[(0,a.FD)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-800/50 rounded-lg border border-gray-700/50 text-sm group relative",title:W("tooltips.oceanWaterCleaned"),children:[(0,a.Y)(g.A,{className:"w-4 h-4 text-cyan-400"}),(0,a.FD)("span",{className:"text-cyan-300 font-medium min-w-[40px] text-right",children:[(null==(t=null!=O?O:null==R?void 0:R.water_cleaned_liters)?void 0:t.toLocaleString())||"0","L"]}),(0,a.FD)("div",{className:"absolute top-full mt-2 right-0 bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none border border-gray-700 z-50",children:[W("tooltips.oceanWaterCleaned"),(0,a.Y)("div",{className:"absolute bottom-full right-3 border-4 border-transparent border-b-gray-900"})]})]}),(0,a.FD)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-800/50 rounded-lg border border-gray-700/50 text-sm group relative",title:W("tooltips.availableCredits"),children:[(0,a.Y)(b.A,{className:"w-4 h-4 text-blue-400"}),(0,a.Y)("span",{className:"text-blue-300 font-medium min-w-[40px] text-right",children:(null==(r=null!=z?z:null==R?void 0:R.credits)?void 0:r.toLocaleString())||"0"}),(0,a.FD)("div",{className:"absolute top-full mt-2 right-0 bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none border border-gray-700 z-50",children:[W("tooltips.availableCredits"),(0,a.Y)("div",{className:"absolute bottom-full right-3 border-4 border-transparent border-b-gray-900"})]})]}),(0,a.Y)("button",{onClick:()=>G(!0),className:"w-9 h-9 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full flex items-center justify-center text-white font-semibold text-sm hover:from-blue-600 hover:to-cyan-600 transition-all",children:em((null==R?void 0:R.full_name)||(null==$?void 0:$.email)||"U")})]}):(0,a.FD)("div",{className:"flex items-center gap-4",children:[(0,a.Y)(c.$,{variant:"outline",onClick:()=>eu("signin"),className:"border-white/20 text-white hover:bg-white/10 px-4 py-2 text-sm",children:W("navigation.signIn")}),(0,a.Y)(c.$,{onClick:()=>eu("signup"),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-4 py-2 text-sm",children:W("navigation.getStarted")})]})]}),(0,a.Y)("div",{className:"md:hidden",children:(0,a.Y)(c.$,{variant:"ghost",onClick:()=>Q(!B),className:"text-white hover:bg-white/10 p-2",children:B?(0,a.Y)(f.A,{className:"w-6 h-6"}):(0,a.Y)(x.A,{className:"w-6 h-6"})})})]}),(0,a.Y)(s.P.div,{initial:{opacity:0,height:0},animate:B?{opacity:1,height:"auto"}:{opacity:0,height:0},transition:{duration:.3},className:"md:hidden overflow-hidden bg-gray-900/95 backdrop-blur-xl rounded-b-lg border-t border-white/10 mt-4",children:(0,a.FD)("div",{className:"p-6 space-y-4",children:[(0,a.Y)("div",{className:"space-y-2 pb-4 border-b border-white/10",children:ef.map(e=>{let t=P===e.key;return(0,a.Y)("button",{onClick:()=>{M.push(e.href),Q(!1)},className:"block w-full text-left py-2 transition-colors ".concat(t?"text-blue-400 font-medium":"text-white/80 hover:text-white"),children:e.label},e.label)})}),$&&(0,a.FD)("div",{className:"pb-4 border-b border-white/10",children:[(0,a.Y)("p",{className:"text-white/60 text-sm mb-3",children:"Your Stats"}),(0,a.FD)("div",{className:"space-y-3",children:[(0,a.FD)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[(0,a.FD)("div",{className:"flex items-center gap-2",children:[(0,a.Y)(g.A,{className:"w-4 h-4 text-cyan-400"}),(0,a.Y)("span",{className:"text-white/80 text-sm",children:"Water Cleaned"})]}),(0,a.FD)("span",{className:"text-cyan-400 font-semibold text-sm",children:[(null==(k=null!=O?O:null==R?void 0:R.water_cleaned_liters)?void 0:k.toLocaleString())||"0","L"]})]}),(0,a.FD)("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[(0,a.FD)("div",{className:"flex items-center gap-2",children:[(0,a.Y)(b.A,{className:"w-4 h-4 text-blue-400"}),(0,a.Y)("span",{className:"text-white/80 text-sm",children:"AI Credits"})]}),(0,a.Y)("span",{className:"text-blue-400 font-semibold text-sm",children:(null==(_=null!=z?z:null==R?void 0:R.credits)?void 0:_.toLocaleString())||"0"})]})]})]}),(0,a.FD)("div",{className:"pb-4 border-b border-white/10",children:[(0,a.Y)("p",{className:"text-white/60 text-sm mb-3",children:"Language"}),(0,a.Y)("div",{children:D.map(e=>(0,a.FD)("button",{onClick:()=>{ee(e),Q(!1)},className:"w-full flex items-center gap-3 p-3 rounded-lg transition-colors mb-2 ".concat(H.code===e.code?"bg-blue-600/20 text-blue-400 border border-blue-600/30":"bg-white/5 text-white/80 hover:bg-white/10"),children:[(0,a.Y)("span",{className:"text-lg",children:e.flag}),(0,a.FD)("div",{className:"text-left",children:[(0,a.Y)("div",{className:"text-sm font-medium",children:e.label}),(0,a.Y)("div",{className:"text-xs text-white/60",children:e.code.toUpperCase()})]}),H.code===e.code&&(0,a.Y)(p.A,{className:"w-4 h-4 ml-auto"})]},e.code))})]}),(0,a.Y)("div",{className:"space-y-3",children:$?(0,a.FD)(a.FK,{children:[(0,a.Y)(c.$,{onClick:()=>{G(!0),Q(!1)},variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:"Profile"}),(0,a.Y)(c.$,{onClick:()=>{J(),Q(!1);let e=T.split("/")[1],t=["it","es"].includes(e);M.push(t?"/".concat(e):"/")},variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:W("profile.signOut")})]}):(0,a.FD)(a.FK,{children:[(0,a.Y)(c.$,{onClick:()=>{eu("signin"),Q(!1)},variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:W("navigation.signIn")}),(0,a.Y)(c.$,{onClick:()=>{eu("signup"),Q(!1)},className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",children:W("navigation.getStarted")})]})})]})})]}),Z&&$&&(0,a.Y)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.FD)(s.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-gray-900/95 backdrop-blur-xl rounded-3xl border border-white/10 w-full max-w-md p-6 relative",children:[(0,a.Y)("button",{onClick:()=>G(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:(0,a.Y)(f.A,{className:"w-5 h-5"})}),(0,a.FD)("div",{className:"text-center",children:[(0,a.Y)("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-full flex items-center justify-center mx-auto mb-4 text-white font-bold text-lg",children:em((null==R?void 0:R.full_name)||(null==$?void 0:$.email)||"U")}),(0,a.Y)("div",{className:"mb-3",children:et?(0,a.FD)("div",{className:"flex items-center gap-2",children:[(0,a.Y)(d.p,{value:es,onChange:e=>ei(e.target.value),className:"bg-white/5 border-white/10 text-white text-center text-lg font-bold",disabled:ec}),(0,a.Y)("button",{onClick:()=>eh("name"),disabled:ec,className:"text-green-400 hover:text-green-300",children:ec?(0,a.Y)(v.A,{className:"w-4 h-4 animate-spin"}):(0,a.Y)(w.A,{className:"w-4 h-4"})})]}):(0,a.FD)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.Y)("h3",{className:"text-lg font-bold text-white",children:(null==R?void 0:R.full_name)||"User"}),(0,a.Y)("button",{onClick:()=>{ei((null==R?void 0:R.full_name)||""),er(!0)},className:"text-gray-400 hover:text-white transition-colors",children:(0,a.Y)(y.A,{className:"w-3 h-3"})})]})}),(0,a.Y)("div",{className:"mb-4",children:ea?(0,a.FD)("div",{className:"flex items-center gap-2",children:[(0,a.Y)(d.p,{value:en,onChange:e=>eo(e.target.value),className:"bg-white/5 border-white/10 text-white text-center text-sm",disabled:ec}),(0,a.Y)("button",{onClick:()=>eh("email"),disabled:ec,className:"text-green-400 hover:text-green-300",children:ec?(0,a.Y)(v.A,{className:"w-4 h-4 animate-spin"}):(0,a.Y)(w.A,{className:"w-4 h-4"})})]}):(0,a.FD)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.Y)("p",{className:"text-gray-400 text-sm",children:null==$?void 0:$.email}),(0,a.Y)("button",{onClick:()=>{eo((null==$?void 0:$.email)||""),el(!0)},className:"text-gray-400 hover:text-white transition-colors",children:(0,a.Y)(y.A,{className:"w-3 h-3"})})]})}),(0,a.FD)("div",{className:"space-y-3",children:[(0,a.FD)("div",{className:"flex justify-between items-center p-2 bg-gray-800/50 rounded-lg",children:[(0,a.Y)("span",{className:"text-gray-400 text-sm",children:W("profile.plan")}),(0,a.FD)("span",{className:"text-blue-400 flex items-center gap-1 text-sm",children:[(0,a.Y)(N.A,{className:"w-3 h-3"}),(null==R||null==(C=R.subscription_plan)?void 0:C.toUpperCase())||"FREE"]})]}),(0,a.FD)("div",{className:"flex justify-between items-center p-2 bg-gray-800/50 rounded-lg",children:[(0,a.Y)("span",{className:"text-gray-400 text-sm",children:W("profile.credits")}),(0,a.Y)("span",{className:"text-blue-400 font-semibold text-sm",children:(null==(S=null!=z?z:null==R?void 0:R.credits)?void 0:S.toLocaleString())||0})]}),(0,a.FD)("div",{className:"flex justify-between items-center p-2 bg-gray-800/50 rounded-lg",children:[(0,a.Y)("span",{className:"text-gray-400 text-sm",children:W("profile.waterCleaned")}),(0,a.FD)("span",{className:"text-cyan-400 font-semibold text-sm",children:[(null==(A=null!=O?O:null==R?void 0:R.water_cleaned_liters)?void 0:A.toLocaleString())||0,"L"]})]}),(0,a.FD)("div",{className:"flex justify-between items-center p-2 bg-gray-800/50 rounded-lg",children:[(0,a.FD)("span",{className:"text-gray-400 text-sm flex items-center gap-1",children:[(0,a.Y)(Y.A,{className:"w-3 h-3"}),W("profile.totalEarnings")]}),(0,a.FD)("span",{className:"text-green-400 font-semibold text-sm",children:["$",(null==R||null==(I=R.total_referral_earnings)?void 0:I.toLocaleString())||0]})]}),(0,a.FD)("div",{className:"flex justify-between items-center p-2 bg-gray-800/50 rounded-lg",children:[(0,a.FD)("span",{className:"text-gray-400 text-sm flex items-center gap-1",children:[(0,a.Y)(F.A,{className:"w-3 h-3"}),W("profile.networkSize")]}),(0,a.FD)("span",{className:"text-purple-400 font-semibold text-sm",children:[Math.floor(((null==R?void 0:R.total_referral_earnings)||0)/5)||0," ",W("profile.people")]})]})]}),(0,a.FD)("div",{className:"mt-4 space-y-2",children:[(!(null==R?void 0:R.subscription_plan)||(null==R?void 0:R.subscription_plan)==="free"||(null==R?void 0:R.subscription_plan)==="plus")&&(0,a.Y)(c.$,{onClick:async()=>{try{ed(!0);let{data:{session:e},error:t}=await m.ND.auth.getSession();if(t||!(null==e?void 0:e.access_token))return void ed(!1);let r=(null==R?void 0:R.subscription_plan)||"free",a=await fetch("/api/stripe/checkout",{method:"POST",headers:{Authorization:"Bearer ".concat(e.access_token),"Content-Type":"application/json"},body:JSON.stringify({planName:"free"===r?"plus":"pro",returnUrl:window.location.href})}),l=await a.json();if(a.ok&&l.checkoutUrl)window.location.href=l.checkoutUrl;else throw Error(l.error||"Failed to create checkout session")}catch(e){console.error("Upgrade error:",e),alert("Failed to start upgrade process. Please try again.")}finally{ed(!1)}},disabled:ec,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",children:ec?(0,a.FD)(a.FK,{children:[(0,a.Y)(v.A,{className:"w-4 h-4 mr-2 animate-spin"}),W("profile.processing")]}):"".concat(W("profile.upgradeTo")," ").concat((null==R?void 0:R.subscription_plan)&&(null==R?void 0:R.subscription_plan)!=="free"?"Pro":"Plus")}),(0,a.Y)("div",{className:"text-center",children:(0,a.Y)("button",{onClick:()=>{J();let e=T.split("/")[1],t=["it","es"].includes(e);M.push(t?"/".concat(e):"/")},className:"text-red-400 hover:text-red-300 text-sm transition-colors",children:W("profile.signOut")})})]})]})]})}),X&&(0,a.Y)("div",{className:"fixed inset-0 z-40",onClick:()=>q(!1)})]})}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(2596),l=r(9688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.QP)((0,a.$)(t))}}}]);