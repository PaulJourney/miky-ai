(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{3800:(e,t,a)=>{var r={"./en.json":[7581,7581],"./es.json":[4754,4754],"./it.json":[1451,1451]};function i(e){if(!a.o(r,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return a.e(t[1]).then(()=>a.t(i,19))}i.keys=()=>Object.keys(r),i.id=3800,e.exports=i},3816:(e,t,a)=>{Promise.resolve().then(a.bind(a,7125))},6126:(e,t,a)=>{"use strict";a.d(t,{E:()=>s});var r=a(5853);a(2115);var i=a(2085),n=a(9434);let l=(0,i.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function s(e){let{className:t,variant:a,...i}=e;return(0,r.Y)("div",{className:(0,n.cn)(l({variant:a}),t),...i})}},6695:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>s});var r=a(5853),i=a(2115),n=a(9434);let l=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.Y)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...i})});l.displayName="Card";let s=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.Y)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...i})});s.displayName="CardHeader";let o=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.Y)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",a),...i})});o.displayName="CardTitle",i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.Y)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...i})}).displayName="CardDescription";let c=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.Y)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...i})});c.displayName="CardContent",i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.Y)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...i})}).displayName="CardFooter"},7125:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var r=a(5853),i=a(2115),n=a(8274),l=a(760),s=a(5695),o=a(2550),c=a(792),d=a(6096);function m(e){let{children:t}=e,[n,l]=(0,i.useState)("en"),[s,o]=(0,i.useState)(null);return((0,i.useEffect)(()=>{let e=(()=>{let e=localStorage.getItem("preferred-locale");if(e&&["it","es","en"].includes(e))return e;let t=navigator.language.split("-")[0];return["it","es"].includes(t)?t:"en"})();l(e),a(3800)("./".concat(e,".json")).then(e=>{o(e.default)}).catch(()=>{a.e(7581).then(a.t.bind(a,7581,19)).then(e=>{o(e.default),l("en")})})},[]),s)?(0,r.Y)(d.default,{locale:n,messages:s,children:t}):(0,r.Y)("div",{className:"min-h-screen bg-gray-950 text-white flex items-center justify-center",children:(0,r.FD)("div",{className:"text-center",children:[(0,r.Y)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.Y)("p",{className:"text-gray-400",children:"Loading..."})]})})}var h=a(4615),u=a(285),g=a(1497),p=a(7580),f=a(2138);function b(e){let{page:t,onSignIn:a,onSignUp:i}=e,l={chat:{icon:(0,r.Y)(g.A,{className:"w-12 h-12 text-blue-400"}),title:"Start Your AI Conversation",description:"Sign in to access your conversation history",features:["Chat with 8 specialized AI personas","Save and access conversation history","Clean ocean water with every message"]},refer:{icon:(0,r.Y)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-cyan-400 rounded-lg flex items-center justify-center",children:(0,r.Y)(p.A,{className:"w-7 h-7 text-white"})}),title:"Access Your Referral Dashboard",description:"Sign in to track your earnings",features:["Track your referral earnings","Monitor your network growth","Access detailed commission reports"]}}[t];return(0,r.Y)("div",{className:"min-h-[60vh] flex items-center justify-center px-6",children:(0,r.FD)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-lg mx-auto text-center",children:[(0,r.Y)("div",{className:"mb-8 flex justify-center",children:l.icon}),(0,r.Y)("h2",{className:"text-3xl font-bold text-white mb-4 text-center",children:l.title}),(0,r.Y)("p",{className:"text-gray-400 mb-8 text-lg text-center",children:l.description}),(0,r.Y)("div",{className:"space-y-3 mb-8",children:l.features.map((e,t)=>(0,r.FD)("div",{className:"flex items-center justify-center gap-3 text-gray-300",children:[(0,r.Y)(f.A,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}),(0,r.Y)("span",{children:e})]},t))}),(0,r.FD)("div",{className:"space-y-4 flex flex-col items-center",children:[(0,r.Y)(u.$,{onClick:i,className:"w-full max-w-md bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 px-6 py-3 text-base font-medium",children:"Get Started Free"}),(0,r.Y)(u.$,{variant:"outline",onClick:a,className:"w-full max-w-md border-gray-600 text-gray-300 hover:bg-gray-700/50 px-6 py-3 text-base font-medium",children:"Sign In"})]}),(0,r.Y)("p",{className:"text-gray-500 text-sm mt-6 text-center",children:"No credit card required • 100 free credits to start"})]})})}var x=a(4404),y=a(9943),v=a(6126),w=a(2523),N=a(6695),Y=a(4105),k=a(2099),S=a(5657),D=a(7949),C=a(9621),F=a(3109),j=a(1976),A=a(8686),P=a(3917),U=a(5868),E=a(1539),I=a(4416),T=a(2525),O=a(4616),M=a(4835),z=a(7213),_=a(1154),R=a(2486),L=a(133),$=a(1788),W=a(4357),K=a(1007),J=a(7951);function B(){return(0,r.Y)(m,{children:(0,r.Y)(Q,{})})}function Q(){var e,t,a;let{user:d,profile:m,loading:p,signOut:f,refreshProfile:B}=(0,Y.A)(),Q=(0,s.useRouter)(),G=(0,o.c3)("dashboard"),[H,Z]=(0,i.useState)(!1),[q,V]=(0,i.useState)(!1),[X,ee]=(0,i.useState)("generic"),[et,ea]=(0,i.useState)(""),[er,ei]=(0,i.useState)([]),[en,el]=(0,i.useState)(!1),[es,eo]=(0,i.useState)(!1),[ec,ed]=(0,i.useState)(!1),[em,eh]=(0,i.useState)(""),[eu,eg]=(0,i.useState)(!0),[ep,ef]=(0,i.useState)([]),[eb,ex]=(0,i.useState)([]),[ey,ev]=(0,i.useState)(!1),[ew,eN]=(0,i.useState)({}),[eY,ek]=(0,i.useState)({}),[eS,eD]=(0,i.useState)("default"),[eC,eF]=(0,i.useState)(!1),[ej,eA]=(0,i.useState)(!1),[eP,eU]=(0,i.useState)(""),[eE,eI]=(0,i.useState)(!1),[eT,eO]=(0,i.useState)(null),[eM,ez]=(0,i.useState)(!1),[e_,eR]=(0,i.useState)(null),[eL,e$]=(0,i.useState)(!1),[eW,eK]=(0,i.useState)(!1),[eJ,eB]=(0,i.useState)(5e3),[eQ,eG]=(0,i.useState)(!1),eH=(0,i.useRef)(null);(0,i.useRef)(null);let eZ=(0,i.useRef)(null);(0,i.useRef)(null);let eq=(0,i.useRef)(null),[eV,eX]=(0,i.useState)(0),[e0,e1]=(0,i.useState)(0),[e4,e5]=(0,i.useState)(null),[e2,e3]=(0,i.useState)(""),[e6,e8]=(0,i.useState)(""),[e9,e7]=(0,i.useState)(null),[te,tt]=(0,i.useState)(!1),ta=(0,i.useRef)(null),tr={generic:{name:G("personas.generic.name"),cost:2,icon:S.A,color:"from-gray-500/20 to-gray-600/20",description:G("personas.generic.description")},academic:{name:G("personas.academic.name"),cost:3,icon:D.A,color:"from-blue-500/20 to-indigo-500/20",description:G("personas.academic.description")},engineer:{name:G("personas.engineer.name"),cost:3,icon:C.A,color:"from-orange-500/20 to-red-500/20",description:G("personas.engineer.description")},marketer:{name:G("personas.marketer.name"),cost:3,icon:F.A,color:"from-green-500/20 to-emerald-500/20",description:G("personas.marketer.description")},coach:{name:G("personas.coach.name"),cost:3,icon:j.A,color:"from-pink-500/20 to-purple-500/20",description:G("personas.coach.description")},lawyer:{name:G("personas.lawyer.name"),cost:5,icon:A.A,color:"from-yellow-500/20 to-amber-500/20",description:G("personas.lawyer.description")},medical:{name:G("personas.medical.name"),cost:4,icon:P.A,color:"from-red-500/20 to-pink-500/20",description:G("personas.medical.description")},"biz-guru":{name:G("personas.biz-guru.name"),cost:3,icon:U.A,color:"from-emerald-500/20 to-teal-500/20",description:G("personas.biz-guru.description")},"god-mode":{name:G("personas.god-mode.name"),cost:4,icon:E.A,color:"from-indigo-500/20 to-violet-500/20",description:G("personas.god-mode.description")}};(0,i.useEffect)(()=>{try{let e=localStorage.getItem("miky-conversations"),t=localStorage.getItem("miky-conversation-titles");if(e){let t=JSON.parse(e);eN(t)}if(t){let e=JSON.parse(t);ek(e)}}catch(e){console.error("Error loading conversations:",e)}},[]),(0,i.useEffect)(()=>{Object.keys(ew).length>0&&localStorage.setItem("miky-conversations",JSON.stringify(ew))},[ew]),(0,i.useEffect)(()=>{if(er.length>0&&eS&&(eN(e=>{let t=e[eS];return t&&t.length===er.length&&JSON.stringify(t)===JSON.stringify(er)?e:{...e,[eS]:er}}),2===er.length&&!eY[eS])){let e=er.find(e=>"user"===e.role);if(e){let t=td(e.content);ek(e=>({...e,[eS]:t}))}}},[er,eS]),(0,i.useEffect)(()=>{m&&(eX(m.credits||0),e1(m.water_cleaned_liters||0))},[m]),(0,i.useEffect)(()=>{let e="".concat(G("placeholders.askAnything")," ").concat(tr[X].name),t=0;eg(!0),eh("");let a=setInterval(()=>{t<=e.length?(eh(e.slice(0,t)),t++):(clearInterval(a),setTimeout(()=>{eg(!1),setTimeout(()=>{eg(!0),eh(""),t=0;let a=setInterval(()=>{t<=e.length?(eh(e.slice(0,t)),t++):(clearInterval(a),eg(!1))},80)},2e3)},1e3))},80);return()=>clearInterval(a)},[X,G]),(0,i.useEffect)(()=>{var e;null==(e=eZ.current)||e.scrollIntoView({behavior:"smooth"})},[er]);let ti=async()=>{if(eP.trim()&&!eE&&tn()){eI(!0);try{let{data:{session:e},error:t}=await k.ND.auth.getSession();if(t)throw Error("Session error: ".concat(t.message));let a=null==e?void 0:e.access_token;if(!a)throw Error("No authentication token available");let r={messages:er,persona:X,generateImage:!0,imagePrompt:eP.trim()},i=await fetch("/api/chat",{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify(r)});if(i.ok){let e=await i.json(),t={id:Date.now().toString()+"_image",role:"assistant",content:e.message,timestamp:new Date,imageUrl:e.imageUrl};ei(e=>[...e,t]),eF(!0),setTimeout(()=>eF(!1),1e3),e.isMockProfile?(eX(t=>Math.max(0,t-e.creditsUsed)),e1(e=>e+1)):(eX(e.newCredits),e1(e.newWaterCleaned),await B()),eA(!1),eU("")}else{let e="HTTP ".concat(i.status);try{e=(await i.json()).error||e}catch(t){try{let t=await i.text();e=t.includes("<!DOCTYPE")?"Server error: API route not responding correctly (".concat(i.status,")"):"Server error: ".concat(t.substring(0,100))}catch(t){e="Server error: Failed to parse response (".concat(i.status,")")}}throw Error(e)}}catch(t){let e={id:Date.now().toString()+"_error",role:"assistant",content:G("messages.imageError",{error:t instanceof Error?t.message:"Unknown error"}),timestamp:new Date};ei(t=>[...t,e])}finally{eI(!1)}}},tn=()=>{let e=tr[X].cost;return!(((null==m?void 0:m.credits)||eV||0)<e)||(eK(!0),!1)},tl=async()=>{if(!et.trim()||es||!tn())return;let e={id:Date.now().toString(),role:"user",content:et.trim(),timestamp:new Date,persona:X};ei(t=>[...t,e]),ea(""),eo(!0);try{let{data:{session:t},error:a}=await k.ND.auth.getSession();if(a)throw Error("Session error: ".concat(a.message));let r=null==t?void 0:t.access_token;if(!r)throw Error("No authentication token available");let i={messages:[...er,e],persona:X},n=await fetch("/api/chat",{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify(i)});if(n.ok){let e=await n.json(),t={id:Date.now().toString()+"_ai",role:"assistant",content:e.message,timestamp:new Date};if(ei(e=>[...e,t]),eF(!0),setTimeout(()=>eF(!1),1e3),e.isMockProfile?(eX(t=>Math.max(0,t-e.creditsUsed)),e1(e=>e+1)):(eX(e.newCredits),e1(e.newWaterCleaned),await B()),1===er.length&&"default"===eS){let e="conversation-".concat(Date.now());eD(e)}}else{let e="HTTP ".concat(n.status);try{e=(await n.json()).error||e}catch(t){try{let t=await n.text();e=t.includes("<!DOCTYPE")?"Server error: API route not responding correctly (".concat(n.status,")"):"Server error: ".concat(t.substring(0,100))}catch(t){e="Server error: Failed to parse response (".concat(n.status,")")}}throw Error(e)}}catch(t){ei(e=>e.slice(0,-1));let e={id:Date.now().toString()+"_error",role:"assistant",content:G("messages.error",{error:t instanceof Error?t.message:"Unknown error"}),timestamp:new Date};ei(t=>[...t,e])}finally{eo(!1)}},ts=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),tl())};if(p)return(0,r.FD)("div",{className:"min-h-screen bg-gray-950 text-white",children:[(0,r.Y)(h.Y,{currentPage:"chat",onSignInClick:()=>Z(!0),onSignUpClick:()=>V(!0)}),(0,r.Y)("div",{className:"min-h-[80vh] flex items-center justify-center",children:(0,r.FD)("div",{className:"text-center",children:[(0,r.Y)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.Y)("p",{className:"text-gray-400",children:G("loading")})]})})]});if(!d&&!p)return(0,r.FD)("div",{className:"min-h-screen bg-gray-950 text-white relative overflow-hidden",children:[(0,r.Y)(y.Q,{}),(0,r.Y)(h.Y,{currentPage:"chat",onSignInClick:()=>Z(!0),onSignUpClick:()=>V(!0)}),(0,r.Y)("div",{className:"relative z-10 pt-8",children:(0,r.Y)(b,{page:"chat",onSignIn:()=>Z(!0),onSignUp:()=>V(!0)})}),(0,r.Y)(x.f,{showSignInModal:H,showSignUpModal:q,onClose:()=>{Z(!1),V(!1)},onSignInSuccess:()=>Q.push("/dashboard"),onSignUpSuccess:()=>Q.push("/dashboard"),onSwitchToSignUp:()=>{Z(!1),V(!0)},onSwitchToSignIn:()=>{V(!1),Z(!0)}})]});let to=async e=>{if(!e.length)return;let t=Array.from(e),a=[];for(let e of t)if(e.type.startsWith("image/")){let t=URL.createObjectURL(e);a.push({file:e,preview:t})}else a.push({file:e,preview:"data:text/plain;base64,".concat(btoa(e.name))});ef(e=>[...e,...t]),ex(e=>[...e,...a])},tc=e=>{ef(t=>t.filter((t,a)=>a!==e)),ex(t=>{let a=t[e];return a&&a.preview.startsWith("blob:")&&URL.revokeObjectURL(a.preview),t.filter((t,a)=>a!==e)})},td=e=>{if(!e)return G("interface.newChat");let t=e.trim().toLowerCase(),a=["the","and","for","are","but","not","you","all","can","had","her","was","one","our","out","day","get","has","him","his","man","new","now","old","see","two","way","boy","did","its","let","put","say","she","too","use","with","from","have","this","that","they","will","been","each","make","more","like","into","time","very","when","come","work","just","good","much","give","want","need"],r=t.split(" ").filter(e=>e.length>2&&!a.includes(e)&&!/^\d+$/.test(e)),i="";if(t.includes("?"))if(t.startsWith("how")){let e=r.slice(1,4).join(" ");i=e?"How to ".concat(e):"How-to Question"}else if(t.startsWith("what")){let e=r.slice(1,4).join(" ");i=e?"About ".concat(e):"Question"}else if(t.startsWith("why")){let e=r.slice(1,4).join(" ");i=e?"Why ".concat(e):"Why Question"}else i=t.startsWith("where")?"Location Question":t.startsWith("when")?"Time Question":r.slice(0,3).join(" ")||"Question";else if(t.includes("help")){let e=r.filter(e=>"help"!==e).slice(0,3).join(" ");i=e?"Help with ".concat(e):"Help Request"}else if(t.includes("create")||t.includes("make")||t.includes("build")){let e=r.slice(1,4).join(" ");i=e?"Create ".concat(e):"Creation Task"}else if(t.includes("explain")||t.includes("describe")){let e=r.slice(1,3).join(" ");i=e?"Explain ".concat(e):"Explanation"}else if(t.includes("write")){let e=r.slice(1,3).join(" ");i=e?"Write ".concat(e):"Writing Task"}else i=r.slice(0,3).join(" ");return(!i||i.length<3)&&(i=e.split(" ").slice(0,4).join(" "),e.split(" ").length>4&&(i+="...")),(i=i.charAt(0).toUpperCase()+i.slice(1)).length>30&&(i=i.substring(0,27)+"..."),i||G("interface.newChat")},tm=(e,t)=>{let a={...eY,[e]:t};ek(a),localStorage.setItem("miky-conversation-titles",JSON.stringify(a))},th=(e,t)=>{e5(e),e3(t)},tu=e=>{e2.trim()&&tm(e,e2.trim()),e5(null),e3("")},tg=e=>{eR(e),ez(!0)},tp=async()=>{eG(!0);try{let{data:{session:e},error:t}=await k.ND.auth.getSession();if(t||!(null==e?void 0:e.access_token))return void eG(!1);let a=(null==m?void 0:m.subscription_plan)||"free",r=await fetch("/api/stripe/checkout",{method:"POST",headers:{Authorization:"Bearer ".concat(e.access_token),"Content-Type":"application/json"},body:JSON.stringify({planName:"free"===a?"plus":"pro",returnUrl:window.location.href})}),i=await r.json();if(r.ok&&i.checkoutUrl)window.location.href=i.checkoutUrl;else throw Error(i.error||"Failed to create checkout session")}catch(e){console.error("Upgrade error:",e),alert("Failed to start upgrade process. Please try again.")}finally{eG(!1)}},tf=async()=>{eG(!0);try{let{data:{session:e},error:t}=await k.ND.auth.getSession();if(t||!(null==e?void 0:e.access_token))return void eG(!1);let a=await fetch("/api/stripe/checkout",{method:"POST",headers:{Authorization:"Bearer ".concat(e.access_token),"Content-Type":"application/json"},body:JSON.stringify({credits:eJ,returnUrl:window.location.href})}),r=await a.json();if(a.ok&&r.checkoutUrl)window.location.href=r.checkoutUrl;else throw Error(r.error||"Failed to create checkout session")}catch(e){console.error("Buy credits error:",e),alert("Failed to start purchase process. Please try again.")}finally{eG(!1)}},tb=Math.round(.019*eJ),tx=e=>{ta.current&&clearTimeout(ta.current),e7(e),ta.current=setTimeout(()=>{tt(!0)},800)},ty=()=>{ta.current&&clearTimeout(ta.current),tt(!1),e7(null)};return p?(0,r.FD)("div",{className:"min-h-screen bg-gray-950 text-white",children:[(0,r.Y)(h.Y,{currentPage:"chat",onSignInClick:()=>Z(!0),onSignUpClick:()=>V(!0)}),(0,r.Y)("div",{className:"min-h-[80vh] flex items-center justify-center",children:(0,r.FD)("div",{className:"text-center",children:[(0,r.Y)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.Y)("p",{className:"text-gray-400",children:G("loading")})]})})]}):d||p?(0,r.FD)("div",{className:"min-h-screen bg-gray-950 text-white",children:[(0,r.Y)(h.Y,{currentPage:"chat",waterAnimation:eC,onSignInClick:()=>Z(!0),onSignUpClick:()=>V(!0),overrideCredits:eV,overrideWaterLiters:e0}),(0,r.FD)("div",{className:"flex h-[calc(100vh-73px)] relative",children:[(0,r.Y)("button",{onClick:()=>e$(!0),className:"lg:hidden fixed top-32 left-4 z-40 w-10 h-10 bg-gray-800/90 backdrop-blur-sm rounded-lg border border-gray-700 flex items-center justify-center text-gray-300 hover:text-white hover:bg-gray-700/90 transition-colors",children:(0,r.Y)(g.A,{className:"w-5 h-5"})}),eL&&(0,r.Y)("div",{className:"lg:hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:()=>e$(!1)}),(0,r.FD)("div",{className:"".concat(eL?"fixed left-0 top-0 z-50":"hidden"," lg:flex w-80 bg-gray-900/95 lg:bg-gray-900/30 border-r border-gray-800 flex-col h-full lg:h-auto backdrop-blur-xl lg:backdrop-blur-none"),children:[(0,r.FD)("div",{className:"lg:hidden flex items-center justify-between p-4 border-b border-gray-800",children:[(0,r.Y)("h2",{className:"text-white font-semibold",children:G("interface.conversations")}),(0,r.Y)("button",{onClick:()=>e$(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,r.Y)(I.A,{className:"w-5 h-5"})})]}),(0,r.Y)("div",{className:"p-4",children:(0,r.FD)(u.$,{variant:"ghost",className:"w-full justify-start text-blue-400 bg-blue-600/10 hover:bg-blue-600/20 border border-blue-600/20",children:[(0,r.Y)(g.A,{className:"w-4 h-4 mr-3"}),G("interface.chat")]})}),(0,r.Y)("div",{className:"px-4 pb-4",children:(0,r.Y)(w.p,{placeholder:G("interface.searchConversations"),value:e6,onChange:e=>e8(e.target.value),className:"bg-gray-800/50 border-gray-600 text-white placeholder-gray-400 text-sm"})}),(0,r.Y)("div",{className:"flex-1 overflow-y-auto px-4",children:(0,r.FD)("div",{className:"space-y-1",children:[Object.entries(ew).filter(e=>{var t;let[a]=e;return"default"!==a||(null==(t=ew[a])?void 0:t.length)>0}).filter(e=>{var t,a;let[r,i]=e;if(!e6)return!0;let n=e6.toLowerCase(),l=eY[r]||td((null==(t=i.find(e=>"user"===e.role))?void 0:t.content)||G("interface.newChat")),s=i[i.length-1],o=(null==(a=i.find(e=>"user"===e.role))?void 0:a.persona)||"generic",c=tr[o],d=(null==c?void 0:c.name)||"Miky";return l.toLowerCase().includes(n)||d.toLowerCase().includes(n)||o.toLowerCase().includes(n)||s&&s.content.toLowerCase().includes(n)}).sort((e,t)=>{let[,a]=e,[,r]=t,i=a[a.length-1],n=r[r.length-1];return i&&n?new Date(n.timestamp).getTime()-new Date(i.timestamp).getTime():0}).slice(0,20).map(e=>{var t,a,n;let[l,s]=e,o=eY[l]||td((null==(t=s.find(e=>"user"===e.role))?void 0:t.content)||G("interface.newChat")),c=eS===l,d=s[s.length-1],m=tr[(null==(a=s.find(e=>"user"===e.role))?void 0:a.persona)||"generic"],h=d?new Date(d.timestamp).toLocaleDateString([],{month:"short",day:"numeric"}):G("time.today"),u=d?new Date(d.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return(0,r.Y)("div",{children:(0,r.FD)("button",{onClick:()=>{try{eD(l),ei(ew[l]||[]),e$(!1)}catch(e){console.error("Error switching conversation:",e)}},className:"w-full text-left p-2 rounded-md transition-colors border-l-2 group relative ".concat(c?"bg-blue-600/20 text-blue-400 border-l-blue-500":"text-gray-400 hover:text-white hover:bg-gray-700/50 border-l-transparent"),children:[(0,r.FD)("div",{className:"flex items-center gap-2 mb-1",children:[i.createElement((null==m?void 0:m.icon)||S.A,{className:"w-3 h-3 flex-shrink-0"}),e4===l?(0,r.Y)(w.p,{value:e2,onChange:e=>e3(e.target.value),onBlur:()=>tu(l),onKeyPress:e=>{"Enter"===e.key&&tu(l),"Escape"===e.key&&(e5(null),e3(""))},className:"flex-1 bg-gray-800 border-gray-600 text-white text-xs h-4 p-1",autoFocus:!0}):(0,r.Y)("div",{className:"truncate font-medium flex-1 cursor-pointer hover:text-blue-300 text-xs",onDoubleClick:()=>th(l,o),title:G("tooltips.doubleClickEdit"),children:o}),(0,r.Y)("button",{onClick:e=>{e.stopPropagation(),tg(l)},className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-red-600/20 rounded text-red-400 hover:text-red-300",title:G("buttons.deleteConversation"),children:(0,r.Y)(T.A,{className:"w-3 h-3"})})]}),(0,r.FD)("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,r.Y)("span",{className:"text-blue-400",children:(null==m||null==(n=m.name)?void 0:n.replace(" Miky",""))||"Miky"}),(0,r.Y)("span",{children:"•"}),(0,r.Y)("span",{children:h}),(0,r.Y)("span",{children:u})]})]})},l)}),0===Object.keys(ew).length&&(0,r.FD)("div",{className:"text-center py-6 text-gray-500 text-xs",children:[(0,r.Y)(g.A,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,r.Y)("p",{children:G("interface.noConversations")}),(0,r.Y)("p",{children:G("interface.startNewChat")})]})]})}),(0,r.Y)("div",{className:"p-4 border-t border-gray-800",children:(0,r.FD)(u.$,{onClick:()=>{er.length>0?(eS&&eN(e=>({...e,[eS]:er})),eD("conversation-".concat(Date.now())),ei([]),ee("generic")):(ei([]),ee("generic"),eS&&"default"!==eS||eD("conversation-".concat(Date.now()))),e$(!1)},variant:"ghost",className:"w-full text-blue-400 hover:bg-blue-600/20",children:[(0,r.Y)(O.A,{className:"w-4 h-4 mr-2"}),G("interface.newChat")]})}),(0,r.Y)("div",{className:"p-4 space-y-2 border-t border-gray-800",children:(0,r.FD)(u.$,{variant:"ghost",onClick:f,className:"w-full justify-start text-white/60 hover:text-white hover:bg-gray-700/50",children:[(0,r.Y)(M.A,{className:"w-4 h-4 mr-3"}),G("interface.signOut")]})})]}),(0,r.FD)("div",{className:"flex-1 flex flex-col ml-0 lg:ml-0",children:[0===er.length?(0,r.Y)("div",{className:"flex-1 flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:(0,r.FD)("div",{className:"text-center max-w-2xl mx-auto px-6",children:[(0,r.FD)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12",children:[(0,r.FD)("h1",{className:"text-2xl font-bold text-white mb-3",children:[G("intro.title")," ",(0,r.Y)("span",{className:"bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent",children:G("intro.highlight")})]}),(0,r.Y)("p",{className:"text-sm text-white/50 leading-tight",children:G("intro.description")})]}),eb.length>0&&(0,r.Y)(n.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-6",children:(0,r.Y)("div",{className:"flex flex-wrap gap-3 justify-center",children:eb.map((e,t)=>{var a;return(0,r.FD)(n.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"relative group",children:[(0,r.Y)("div",{className:"w-16 h-16 bg-gray-800/50 rounded-lg border border-gray-600 flex items-center justify-center overflow-hidden",children:e.file.type.startsWith("image/")?(0,r.Y)("img",{src:e.preview,alt:e.file.name,className:"w-full h-full object-cover"}):(0,r.Y)("div",{className:"text-gray-400 text-xs text-center p-1",children:null==(a=e.file.name.split(".").pop())?void 0:a.toUpperCase()})}),(0,r.Y)("button",{onClick:()=>tc(t),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-600 rounded-full flex items-center justify-center text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"\xd7"})]},t)})})}),(0,r.Y)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-8",ref:eq,children:(0,r.Y)("div",{className:"relative max-w-2xl mx-auto",children:(0,r.FD)("div",{className:"flex items-center gap-3 p-4 bg-gray-800/50 rounded-2xl border border-gray-700/50 focus-within:border-gray-600 transition-colors backdrop-blur-sm",children:[(0,r.Y)(u.$,{variant:"ghost",size:"sm",onClick:()=>{var e;return null==(e=eH.current)?void 0:e.click()},className:"text-gray-400 hover:text-white p-1",title:G("buttons.uploadFile"),children:(0,r.Y)(O.A,{className:"w-5 h-5"})}),(0,r.Y)(u.$,{variant:"ghost",size:"sm",onClick:()=>eA(!0),className:"text-gray-400 hover:text-white p-1",title:G("buttons.generateImage"),children:(0,r.Y)(z.A,{className:"w-5 h-5"})}),(0,r.Y)(w.p,{value:et,onChange:e=>ea(e.target.value),onKeyPress:ts,placeholder:et?"":eu?em:"".concat(G("placeholders.askAnything")," ").concat(tr[X].name),className:"bg-transparent border-none text-white placeholder-gray-400 text-sm flex-1 focus-visible:ring-0 focus-visible:ring-offset-0",disabled:es,style:{outline:"none",boxShadow:"none"}}),(0,r.Y)(u.$,{onClick:tl,disabled:es||!et.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white w-10 h-10 rounded-lg",size:"sm",children:es?(0,r.Y)(_.A,{className:"w-5 h-5 animate-spin"}):(0,r.Y)(R.A,{className:"w-5 h-5"})})]})})}),(0,r.FD)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"relative",children:[(0,r.Y)("div",{className:"flex flex-wrap justify-center gap-3",children:Object.entries(tr).map(e=>{let[t,a]=e;return(0,r.FD)(n.P.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},animate:{scale:X===t?1.05:1,borderColor:X===t?"#6B7280":"#4B5563"},transition:{type:"spring",stiffness:300,damping:20,duration:.2},onClick:()=>ee(t),onMouseEnter:()=>tx(t),onMouseLeave:ty,className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all border relative overflow-hidden flex items-center gap-1 ".concat(X===t?"bg-gray-600 text-white border-gray-500 shadow-lg":"bg-transparent text-gray-400 hover:text-white hover:bg-gray-700/50 border-gray-600"),children:[X===t&&(0,r.Y)(n.P.div,{layoutId:"activePersonaBg",className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-cyan-600/20",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}}),(0,r.Y)("span",{className:"relative z-10",children:i.createElement(a.icon,{className:"w-3 h-3"})}),(0,r.Y)("span",{className:"relative z-10",children:a.name})]},t)})}),(0,r.Y)(l.N,{children:te&&e9&&(0,r.Y)(n.P.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute bottom-full mb-4 left-1/2 transform -translate-x-1/2 max-w-md w-80 z-50",children:(0,r.FD)("div",{className:"bg-gray-900/95 backdrop-blur-xl rounded-xl border border-gray-700/50 p-4 shadow-2xl",children:[(0,r.FD)("div",{className:"text-center mb-3",children:[(0,r.Y)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-r ".concat(null==(e=tr[e9])?void 0:e.color," flex items-center justify-center mx-auto mb-2"),children:i.createElement(null==(t=tr[e9])?void 0:t.icon,{className:"w-4 h-4 text-white"})}),(0,r.Y)("h4",{className:"text-white font-semibold text-sm text-center",children:null==(a=tr[e9])?void 0:a.name})]}),(0,r.Y)("p",{className:"text-gray-300 text-xs leading-relaxed text-center",children:G("personas.".concat(e9,".fullDescription"))}),(0,r.Y)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900/95"})]})})})]})]})}):(0,r.FD)("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-900",children:[(0,r.Y)("div",{className:"max-w-4xl mx-auto mb-6 flex items-center justify-between",children:(0,r.FD)("div",{className:"flex items-center gap-3",children:[(0,r.FD)(v.E,{className:"bg-gradient-to-r ".concat(tr[X].color," border-gray-600 text-white px-3 py-1.5"),children:[(0,r.Y)("span",{className:"mr-2",children:i.createElement(tr[X].icon,{className:"w-4 h-4"})}),tr[X].name]}),(0,r.FD)(u.$,{variant:"ghost",size:"sm",onClick:()=>{ei([]),ed(!1)},className:"text-gray-400 hover:text-white",children:[(0,r.Y)(L.A,{className:"w-4 h-4 mr-2"}),G("interface.changePersona")]})]})}),(0,r.FD)("div",{className:"space-y-6 max-w-4xl mx-auto",children:[(0,r.Y)(l.N,{children:er.map((e,t)=>(0,r.FD)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"flex gap-3 ".concat("user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&(0,r.Y)("div",{className:"w-8 h-8 bg-gray-700/60 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:(0,r.Y)(S.A,{className:"w-4 h-4 text-gray-300"})}),(0,r.FD)("div",{className:"max-w-[70%] ".concat("user"===e.role?"order-first":""),children:[(0,r.Y)(N.Zp,{className:"".concat("user"===e.role?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white border-blue-500":"bg-gray-800/50 text-gray-100 border-gray-700"),children:(0,r.FD)(N.Wu,{className:"p-4",children:[(0,r.Y)("div",{className:"text-sm leading-relaxed mb-3",children:"assistant"===e.role?(0,r.Y)(c.oz,{components:{h1:e=>{let{children:t}=e;return(0,r.Y)("h1",{className:"text-lg font-bold mb-2 text-white",children:t})},h2:e=>{let{children:t}=e;return(0,r.Y)("h2",{className:"text-base font-bold mb-2 text-white",children:t})},h3:e=>{let{children:t}=e;return(0,r.Y)("h3",{className:"text-sm font-bold mb-1 text-white",children:t})},strong:e=>{let{children:t}=e;return(0,r.Y)("strong",{className:"font-bold text-white",children:t})},em:e=>{let{children:t}=e;return(0,r.Y)("em",{className:"italic text-gray-200",children:t})},p:e=>{let{children:t}=e;return(0,r.Y)("p",{className:"mb-2 last:mb-0",children:t})},ul:e=>{let{children:t}=e;return(0,r.Y)("ul",{className:"list-disc list-inside mb-2 space-y-1",children:t})},ol:e=>{let{children:t}=e;return(0,r.Y)("ol",{className:"list-decimal list-inside mb-2 space-y-1",children:t})},li:e=>{let{children:t}=e;return(0,r.Y)("li",{className:"text-gray-100",children:t})},code:e=>{let{children:t}=e;return(0,r.Y)("code",{className:"bg-gray-700/50 px-1 py-0.5 rounded text-xs font-mono text-blue-300",children:t})},pre:e=>{let{children:t}=e;return(0,r.Y)("pre",{className:"bg-gray-700/50 p-3 rounded-lg text-xs font-mono overflow-x-auto mb-2",children:t})}},children:e.content}):(0,r.Y)("div",{className:"whitespace-pre-wrap",children:e.content})}),e.imageUrl&&"string"==typeof e.imageUrl&&""!==e.imageUrl.trim()&&(0,r.Y)("div",{className:"mt-4",children:(0,r.Y)("div",{className:"text-center",children:(0,r.FD)(u.$,{onClick:async()=>{try{let t=await fetch(e.imageUrl,{mode:"cors"}),a=await t.blob(),r=window.URL.createObjectURL(a),i=document.createElement("a");i.href=r,i.download="miky-generated-image-".concat(Date.now(),".png"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)}catch(t){window.open(e.imageUrl,"_blank")}},size:"sm",className:"bg-blue-600/20 hover:bg-blue-600/30 text-blue-400 hover:text-blue-300 border border-blue-600/30 hover:border-blue-600/50 transition-all duration-200",children:[(0,r.Y)($.A,{className:"w-4 h-4 mr-2"}),G("messages.downloadImage")]})})})]})}),(0,r.FD)("div",{className:"text-xs text-gray-500 mt-2 px-1 flex items-center justify-between",children:[(0,r.Y)("span",{children:e.timestamp.toLocaleTimeString()}),"assistant"===e.role&&!e.imageUrl&&(0,r.FD)("div",{className:"relative",children:[(0,r.Y)("button",{onClick:()=>{navigator.clipboard.writeText(e.content),eO(e.id),setTimeout(()=>eO(null),2e3)},className:"text-gray-500 hover:text-gray-300 transition-colors ml-2",title:G("buttons.copyMessage"),children:(0,r.Y)(W.A,{className:"w-3 h-3"})}),eT===e.id&&(0,r.FD)("div",{className:"absolute bottom-full mb-1 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap",children:[G("messages.copied"),(0,r.Y)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-2 border-transparent border-t-gray-900"})]})]})]})]}),"user"===e.role&&(0,r.Y)("div",{className:"w-8 h-8 bg-gray-700/60 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:(0,r.Y)(K.A,{className:"w-4 h-4 text-gray-300"})})]},e.id))}),es&&(0,r.FD)(n.P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-3",children:[(0,r.Y)("div",{className:"w-8 h-8 bg-gray-700/60 rounded-full flex items-center justify-center",children:(0,r.Y)(S.A,{className:"w-4 h-4 text-gray-300"})}),(0,r.Y)(N.Zp,{className:"bg-gray-800/50 border-gray-700",children:(0,r.Y)(N.Wu,{className:"p-4",children:(0,r.FD)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,r.Y)(_.A,{className:"w-4 h-4 animate-spin"}),(0,r.FD)("span",{className:"text-sm",children:[tr[X].name," ",G("messages.thinking")]})]})})})]}),(0,r.Y)("div",{ref:eZ})]})]}),er.length>0&&(0,r.Y)("div",{className:"border-t border-gray-800 p-4 bg-gray-900",children:(0,r.FD)("div",{className:"max-w-4xl mx-auto",children:[eb.length>0&&(0,r.Y)("div",{className:"mb-4",children:(0,r.Y)("div",{className:"flex flex-wrap gap-2",children:eb.map((e,t)=>{var a;return(0,r.FD)(n.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"relative group",children:[(0,r.Y)("div",{className:"w-12 h-12 bg-gray-800/50 rounded-lg border border-gray-600 flex items-center justify-center overflow-hidden",children:e.file.type.startsWith("image/")?(0,r.Y)("img",{src:e.preview,alt:e.file.name,className:"w-full h-full object-cover"}):(0,r.Y)("div",{className:"text-gray-400 text-xs",children:null==(a=e.file.name.split(".").pop())?void 0:a.toUpperCase()})}),(0,r.Y)("button",{onClick:()=>tc(t),className:"absolute -top-1 -right-1 w-4 h-4 bg-red-600 rounded-full flex items-center justify-center text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"\xd7"})]},t)})})}),(0,r.FD)("div",{className:"flex items-center gap-3 p-4 bg-gray-800/50 rounded-xl border border-gray-700 focus-within:border-blue-500 transition-colors",children:[(0,r.Y)(u.$,{variant:"ghost",size:"sm",onClick:()=>{var e;return null==(e=eH.current)?void 0:e.click()},className:"text-gray-400 hover:text-white",title:G("buttons.uploadFile"),children:(0,r.Y)(O.A,{className:"w-5 h-5"})}),(0,r.Y)(u.$,{variant:"ghost",size:"sm",onClick:()=>eA(!0),className:"text-gray-400 hover:text-white",title:G("buttons.generateImage"),children:(0,r.Y)(z.A,{className:"w-5 h-5"})}),(0,r.Y)(w.p,{value:et,onChange:e=>ea(e.target.value),onKeyPress:ts,placeholder:"".concat(G("placeholders.askAnything")," ").concat(tr[X].name,"..."),className:"bg-transparent border-none text-white placeholder-gray-400 focus:outline-none focus:ring-0 p-0 text-base flex-1 focus-visible:ring-0 focus-visible:ring-offset-0",disabled:es,style:{outline:"none",boxShadow:"none"}}),(0,r.Y)(u.$,{onClick:tl,disabled:es||!et.trim(),className:"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white w-10 h-10 rounded-lg",size:"sm",children:es?(0,r.Y)(_.A,{className:"w-5 h-5 animate-spin"}):(0,r.Y)(R.A,{className:"w-5 h-5"})})]})]})})]})]}),(0,r.Y)("input",{ref:eH,type:"file",multiple:!0,accept:"image/*,.pdf,.txt,.doc,.docx,.xls,.xlsx,video/*,audio/*",onChange:e=>e.target.files&&to(e.target.files),className:"hidden"}),ej&&(0,r.Y)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.FD)(n.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-gray-900/95 backdrop-blur-xl rounded-3xl border border-white/10 w-full max-w-md p-8 relative",children:[(0,r.Y)("button",{onClick:()=>{eA(!1),eU("")},className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:(0,r.Y)(I.A,{className:"w-5 h-5"})}),(0,r.FD)("div",{className:"text-center mb-8",children:[(0,r.Y)("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.Y)(z.A,{className:"w-8 h-8 text-purple-400"})}),(0,r.Y)("h3",{className:"text-2xl font-bold text-white mb-2",children:G("imageGeneration.title")}),(0,r.Y)("p",{className:"text-gray-400 text-sm",children:G("imageGeneration.description",{persona:tr[X].name})})]}),(0,r.FD)("div",{className:"space-y-4",children:[(0,r.Y)("textarea",{value:eP,onChange:e=>eU(e.target.value),placeholder:G("imageGeneration.placeholder"),rows:4,className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:border-purple-500 focus:outline-none resize-none"}),(0,r.Y)("div",{className:"text-sm text-gray-500",children:G("imageGeneration.highQuality")}),(0,r.FD)("div",{className:"flex gap-3",children:[(0,r.Y)(u.$,{onClick:()=>{eA(!1),eU("")},variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700/50",children:G("imageGeneration.cancel")}),(0,r.Y)(u.$,{onClick:ti,disabled:!eP.trim()||eE,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:eE?(0,r.FD)(r.FK,{children:[(0,r.Y)(_.A,{className:"w-4 h-4 mr-2 animate-spin"}),G("imageGeneration.generating")]}):(0,r.FD)(r.FK,{children:[(0,r.Y)(z.A,{className:"w-4 h-4 mr-2"}),G("imageGeneration.generate")]})})]})]})]})}),eM&&(0,r.Y)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.Y)(n.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-gray-900/95 backdrop-blur-xl rounded-3xl border border-white/10 w-full max-w-md p-8 relative",children:(0,r.FD)("div",{className:"text-center",children:[(0,r.Y)("div",{className:"w-16 h-16 bg-red-600/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.Y)(T.A,{className:"w-8 h-8 text-red-400"})}),(0,r.Y)("h3",{className:"text-xl font-bold text-white mb-4",children:G("deleteModal.title")}),(0,r.Y)("p",{className:"text-gray-400 mb-6 text-sm",children:G("deleteModal.description")}),(0,r.FD)("div",{className:"flex gap-3",children:[(0,r.Y)(u.$,{onClick:()=>{ez(!1),eR(null)},variant:"outline",className:"flex-1 border-gray-600 text-gray-300 hover:bg-gray-700/50",children:G("deleteModal.cancel")}),(0,r.FD)(u.$,{onClick:()=>{if(e_){eN(e=>{let t={...e};return delete t[e_],t}),ek(e=>{let t={...e};return delete t[e_],t});let e={...ew};delete e[e_],localStorage.setItem("miky-conversations",JSON.stringify(e));let t={...eY};delete t[e_],localStorage.setItem("miky-conversation-titles",JSON.stringify(t)),e_===eS&&(eD("conversation-".concat(Date.now())),ei([]),ee("generic"))}ez(!1),eR(null)},className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:[(0,r.Y)(T.A,{className:"w-4 h-4 mr-2"}),G("deleteModal.delete")]})]})]})})}),eW&&(0,r.Y)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.FD)(n.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-gray-900/95 backdrop-blur-xl rounded-3xl border border-white/10 w-full max-w-md p-8 relative",children:[(0,r.Y)("button",{onClick:()=>eK(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:(0,r.Y)(I.A,{className:"w-5 h-5"})}),(0,r.FD)("div",{className:"text-center",children:[(0,r.Y)("div",{className:"w-16 h-16 bg-orange-600/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.Y)(E.A,{className:"w-8 h-8 text-orange-400"})}),(0,r.Y)("h3",{className:"text-xl font-bold text-white mb-4",children:G("creditsModal.title")}),(null==m?void 0:m.subscription_plan)&&(null==m?void 0:m.subscription_plan)!=="free"&&(null==m?void 0:m.subscription_plan)!=="plus"?(0,r.FD)(r.FK,{children:[(0,r.Y)("p",{className:"text-gray-400 mb-6 text-sm",children:G("creditsModal.descriptionPro")}),(0,r.FD)("div",{className:"space-y-6",children:[(0,r.FD)("div",{className:"text-center",children:[(0,r.Y)("div",{className:"text-2xl font-bold text-white mb-2",children:eJ.toLocaleString()}),(0,r.Y)("div",{className:"text-sm text-gray-400",children:G("creditsModal.credits")})]}),(0,r.FD)("div",{className:"relative px-4",children:[(0,r.Y)("input",{type:"range",min:1e3,max:1e5,step:1e3,value:eJ,onChange:e=>{eB(Number(e.target.value))},className:"w-full h-3 bg-gray-700 rounded-full appearance-none slider-thumb cursor-pointer",style:{background:"linear-gradient(to right,\n                            rgb(37 99 235) 0%,\n                            rgb(8 145 178) ".concat((eJ-1e3)/99e3*100,"%,\n                            rgb(55 65 81) ").concat((eJ-1e3)/99e3*100,"%,\n                            rgb(55 65 81) 100%)")}}),(0,r.FD)("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[(0,r.FD)("span",{children:["1","K"]}),(0,r.FD)("span",{children:["100","K"]})]})]}),(0,r.FD)("div",{className:"text-center",children:[(0,r.FD)("div",{className:"text-xl font-bold text-blue-400",children:["$",tb]}),(0,r.Y)("div",{className:"text-sm text-gray-400",children:G("creditsModal.totalCost")})]}),(0,r.Y)(u.$,{onClick:tf,disabled:eQ,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",children:eQ?(0,r.FD)(r.FK,{children:[(0,r.Y)(_.A,{className:"w-4 h-4 mr-2 animate-spin"}),G("creditsModal.processing")]}):(0,r.FD)(r.FK,{children:[(0,r.Y)(U.A,{className:"w-4 h-4 mr-2"}),G("creditsModal.buyCredits")]})})]})]}):(0,r.FD)(r.FK,{children:[(0,r.Y)("p",{className:"text-gray-400 mb-6 text-sm",children:G("creditsModal.description")}),(0,r.FD)("div",{className:"space-y-4",children:[(0,r.Y)(u.$,{onClick:tp,disabled:eQ,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",children:eQ?(0,r.FD)(r.FK,{children:[(0,r.Y)(_.A,{className:"w-4 h-4 mr-2 animate-spin"}),G("creditsModal.processing")]}):(0,r.FD)(r.FK,{children:[(0,r.Y)(J.A,{className:"w-4 h-4 mr-2"}),G("creditsModal.upgrade")," ",(null==m?void 0:m.subscription_plan)!=="free"&&(null==m?void 0:m.subscription_plan)?"Pro":"Plus"]})}),(0,r.Y)("button",{onClick:()=>{eK(!1),Q.push("/pricing")},className:"text-blue-400 hover:text-blue-300 text-sm transition-colors",children:G("creditsModal.viewAllPlans")})]})]})]})]})})]}):(0,r.FD)("div",{className:"min-h-screen bg-gray-950 text-white relative overflow-hidden",children:[(0,r.Y)(y.Q,{}),(0,r.Y)(h.Y,{currentPage:"chat",onSignInClick:()=>Z(!0),onSignUpClick:()=>V(!0)}),(0,r.Y)("div",{className:"relative z-10 pt-8",children:(0,r.Y)(b,{page:"chat",onSignIn:()=>Z(!0),onSignUp:()=>V(!0)})}),(0,r.Y)(x.f,{showSignInModal:H,showSignUpModal:q,onClose:()=>{Z(!1),V(!1)},onSignInSuccess:()=>Q.push("/dashboard"),onSignUpSuccess:()=>Q.push("/dashboard"),onSwitchToSignUp:()=>{Z(!1),V(!0)},onSwitchToSignIn:()=>{V(!1),Z(!0)}})]})}},9943:(e,t,a)=>{"use strict";a.d(t,{Q:()=>n});var r=a(5853),i=a(8274);function n(e){let{className:t=""}=e;return(0,r.FD)("div",{className:"absolute inset-0 overflow-hidden ".concat(t),children:[(0,r.Y)(i.P.div,{className:"absolute top-1/4 left-1/6 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl",animate:{x:[0,100,-50,0],y:[0,-100,50,0],scale:[1,1.2,.8,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),(0,r.Y)(i.P.div,{className:"absolute bottom-1/3 right-1/4 w-80 h-80 bg-cyan-500/10 rounded-full blur-3xl",animate:{x:[0,-80,120,0],y:[0,80,-60,0],scale:[1,.9,1.3,1]},transition:{duration:25,repeat:1/0,ease:"easeInOut",delay:2}}),(0,r.Y)(i.P.div,{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-blue-400/10 rounded-full blur-3xl",animate:{x:[0,-120,80,0],y:[0,60,-80,0],scale:[1,1.1,.9,1]},transition:{duration:18,repeat:1/0,ease:"easeInOut",delay:4}})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5853,2497,2550,7943,2354,584,4477,4961,8441,1684,7358],()=>t(3816)),_N_E=e.O()}]);